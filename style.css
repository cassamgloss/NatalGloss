/* ==========================================================================
   1. IMPORTAÇÃO DE FONTES E CONFIGURAÇÕES GERAIS
   ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Raleway:wght@400;700;900&display=swap');

body { margin: 0; padding: 0; background-color: #000; font-family: 'Raleway', sans-serif; overflow: hidden; height: 100vh; width: 100vw; }

/* ==========================================================================
   2. SISTEMA DE CAMADAS
   ========================================================================== */
#game-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; display: block; }
#menu-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; background-image: url('assets/img/bg-menu.png'); background-position: center; background-size: cover; background-repeat: no-repeat; transition: filter 0.5s; }
#snow-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; overflow: hidden; }
#ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; display: flex; overflow: hidden; }

/* ==========================================================================
   3. LAYOUT E POSICIONAMENTO
   ========================================================================== */
.content-wrapper { display: flex; justify-content: center; align-items: flex-end; width: 100%; height: 100%; position: relative; z-index: 20; }
.hero-image { height: 90vh; width: auto; object-fit: contain; margin-right: -60px; z-index: 15; filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.8)); pointer-events: none; transform: translateY(20px); }
.menu-content { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; max-width: 600px; z-index: 60; margin-bottom: 15vh; position: relative; }
.menu-title-img { width: 120%; max-width: 800px; height: auto; margin-bottom: 35px; pointer-events: none; filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.9)); }
.button-container { display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%; }

/* ==========================================================================
   4. BOTÕES
   ========================================================================== */
.btn { font-family: 'Raleway', sans-serif; text-transform: uppercase; border: none; outline: none; cursor: pointer; position: relative; display: flex; justify-content: center; align-items: center; background-color: transparent; user-select: none; -webkit-tap-highlight-color: transparent; }
.btn-gold { width: 80vw; max-width: 450px; height: 95px; background-image: url('assets/img/botao-comecar.png'); background-size: 100% 100%; background-repeat: no-repeat; background-position: center; color: #3a2c1f; font-size: clamp(1rem, 2.5vw, 1.6rem); font-weight: 900; padding-top: 5px; text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.4); box-shadow: none; filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.8)); transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); }
.btn-gold:hover { transform: translateY(-2px) scale(1.03); filter: brightness(1.15) contrast(1.1) drop-shadow(0 15px 25px rgba(0, 0, 0, 0.9)); }
.btn-gold:active { transform: scale(0.98); filter: brightness(1.0); }
.btn-blue { width: 200px; height: 50px; font-size: 1.1rem; font-weight: 800; background: linear-gradient(180deg, #2c5364 0%, #203a43 100%); color: #fff; border-radius: 30px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.8); margin-top: 5px; transition: all 0.3s ease; }
.btn-blue:hover { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(0, 0, 0, 0.9); filter: brightness(1.2); }
.btn-sound { margin-top: 25px; width: 50px; height: 50px; background: rgba(0, 0, 0, 0.6); border: 2px solid #ffcc9c; border-radius: 12px; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 25; position: relative; transition: all 0.2s ease; }
.btn-sound img { width: 28px; height: 28px; transition: opacity 0.2s; }
.btn-sound:hover { transform: scale(1.05); background: rgba(0, 0, 0, 0.8); }
.btn-sound.muted img { opacity: 0.7; }
.btn-sound.muted::after { content: ''; position: absolute; top: 50%; left: 50%; width: 70%; height: 3px; background-color: #ff3333; transform: translate(-50%, -50%) rotate(-45deg); border-radius: 2px; box-shadow: 0 0 2px rgba(0,0,0,0.8); pointer-events: none; }
/* ... Mantenha o CSS anterior igual ... */

/* NOVO: Botão Brilho Eterno */
.btn-gold-eterno {
    width: 80vw;
    max-width: 450px;
    height: 95px;
    /* Aponta para a imagem que JÁ EXISTE */
    background-image: url('assets/img/botao-comecar.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;
    
    /* Estilo de Texto para diferenciar (já que a imagem é a mesma, o texto HTML aparece por cima) */
    color: #3a2c1f;
    font-family: 'Raleway', sans-serif;
    text-transform: uppercase;
    font-size: clamp(1rem, 2.5vw, 1.6rem);
    font-weight: 900;
    padding-top: 5px;
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.4);
    
    border: none;
    outline: none;
    cursor: pointer;
    filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.8));
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.btn-gold-eterno:hover {
    transform: translateY(-2px) scale(1.03);
    filter: brightness(1.15) contrast(1.1) drop-shadow(0 15px 25px rgba(0, 0, 0, 0.9));
}

.btn-gold-eterno:active {
    transform: scale(0.98);
}
/* ==========================================================================
   5. TRANSIÇÃO, NEVE E CONTAGEM
   ========================================================================== */
#transition-layer { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; pointer-events: none; display: flex; justify-content: center; align-items: center; overflow: hidden; }
.giant-flake { position: absolute; width: 180vmax; height: auto; left: 50%; transform: translateX(-50%); top: -250vmax; transition: top 2.5s ease-in-out; filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.5)); }
.giant-flake.falling { top: 200vh; }
.giant-flake-spin { animation: spin 15s linear infinite; }
@keyframes spin { to { transform: translateX(-50%) rotate(360deg); } }
#countdown-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 8000; background: rgba(0, 0, 0, 0.75); backdrop-filter: blur(2px); }
#countdown-number { font-family: 'Montserrat', sans-serif; font-size: 15rem; font-weight: 900; color: #ffffff; text-shadow: 0 0 20px #00e6e6, 0 0 40px #00ace6; opacity: 0; transform: scale(0.5); transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.pop-in { opacity: 1 !important; transform: scale(1.2) !important; }
.snowflake { position: absolute; top: -10vh; color: #fff; user-select: none; will-change: transform; filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.7)); animation-iteration-count: infinite; }
img.snowflake { height: auto; }
.snow-dot { background-color: #fff; border-radius: 50%; }
@keyframes snowfall-straight { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 15% { opacity: 1; } 100% { transform: translateY(110vh) rotate(360deg); opacity: 0.6; } }
@keyframes snowfall-left { 0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0; } 100% { transform: translateY(110vh) translateX(-15vw) rotate(-180deg); opacity: 0.6; } }
@keyframes snowfall-right { 0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0; } 100% { transform: translateY(110vh) translateX(15vw) rotate(180deg); opacity: 0.6; } }

/* ==========================================================================
   6. TELA DE INSTRUÇÕES (FINAL: TEXTURA E ANIMAÇÕES)
   ========================================================================== */
#instructions-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 5000; display: flex; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px); }

/* --- 1. A CAIXA COM TEXTURA PREMIUM --- */
.instructions-box { 
    width: 90%; max-width: 1100px; 
    /* Mistura gradiente escuro com um padrão sutil de listras douradas transparentes */
    background: 
        linear-gradient(135deg, rgba(26,26,26,0.96) 0%, rgba(13,13,13,0.98) 100%),
        repeating-linear-gradient(45deg, rgba(255, 215, 0, 0.03) 0px, rgba(255, 215, 0, 0.03) 1px, transparent 1px, transparent 10px);
    
    border: 4px solid #ffd700; border-radius: 30px; padding: 40px 40px 60px 40px; text-align: center; 
    box-shadow: 0 0 60px rgba(255, 215, 0, 0.25); /* Glow externo */
    position: relative; display: flex; flex-direction: column; align-items: center; 
}

/* Título com Animação de Entrada */
.instr-main-title { 
    font-family: 'Raleway', sans-serif; color: #ffd700; font-size: 2.5rem; margin: 0 0 40px 0; 
    text-shadow: 0 2px 10px rgba(0,0,0,0.8); border-bottom: 2px solid rgba(255, 215, 0, 0.3); padding-bottom: 15px; width: 80%;
    
    opacity: 0; /* Começa invisível */
    animation: dropIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.1s;
}

.instr-columns { display: flex; justify-content: space-between; gap: 0; width: 100%; margin-bottom: 30px; }

/* --- 2. COLUNAS COM ANIMAÇÃO EM CASCATA --- */
.instr-col { 
    flex: 1; display: flex; flex-direction: column; align-items: center; padding: 0 30px; position: relative; 
    
    opacity: 0; /* Começa invisível */
    animation: slideUpFade 0.6s ease-out forwards;
}

/* Delays para o efeito cascata (um depois do outro) */
.instr-col:nth-child(1) { animation-delay: 0.3s; }
.instr-col:nth-child(2) { animation-delay: 0.5s; }
.instr-col:nth-child(3) { animation-delay: 0.7s; }

.instr-col:not(:last-child) { border-right: 2px solid rgba(255, 215, 0, 0.3); }
.instr-col h3 { font-family: 'Montserrat', sans-serif; color: #fff; font-size: 1.5rem; margin-top: 0; margin-bottom: 15px; }
.instr-col p { font-family: 'Raleway', sans-serif; color: #ccc; font-size: 1.1rem; line-height: 1.5; margin: 0; }
.gold-text { color: #ffd700 !important; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
.warning-text { font-size: 1rem !important; color: #ff6b6b !important; font-weight: bold; margin-top: 15px; }

.instr-icons, .jessica-preview, .keys-container { margin-top: auto; padding-bottom: 10px; }
.instr-icons { display: flex; justify-content: center; align-items: center; }
.instr-icons img { width: 130px; margin: 0 15px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
.jessica-preview img { height: 240px; filter: drop-shadow(0 0 20px #ffd700); }

/* --- 3. TECLAS ANIMADAS (PRESSIONANDO) --- */
.keys-container { display: flex; gap: 25px; }
.key { 
    background: #333; color: #fff; font-size: 3.5rem; padding: 20px 40px; 
    border-radius: 12px; 
    border-bottom: 6px solid #111; /* Borda grossa para dar volume 3D */
    transition: transform 0.1s;
}

/* Animação de pressionar */
@keyframes keyPress {
    0%, 100% { transform: translateY(0); border-bottom-width: 6px; }
    50% { transform: translateY(4px); border-bottom-width: 2px; } /* Desce e borda diminui */
}

/* Esquerda começa, Direita vai depois (alternando) */
.key-left { animation: keyPress 1.5s infinite; }
.key-right { animation: keyPress 1.5s infinite 0.75s; } /* Delay de metade do tempo */

/* Efeitos Globais */
.icon-float { animation: float 3s ease-in-out infinite; }
.delay { animation-delay: 1.5s; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

/* Botão com Pop-In no final */
.btn-instr { 
    font-size: 1.4rem !important; margin-top: 20px; width: 300px !important; height: 70px !important; 
    opacity: 0; 
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 1.0s; /* Aparece por último */
}
.hidden { display: none !important; }

/* --- KEYFRAMES DE ENTRADA --- */
@keyframes dropIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes slideUpFade { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
/* PopIn já existe lá em cima, mas garantindo */
@keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }


/* ==========================================================================
   7. RESPONSIVIDADE
   ========================================================================== */
@media (max-height: 700px), (max-width: 1024px) {
    .hero-image { height: 80vh; margin-right: -30px; }
    .menu-content { margin-bottom: 5vh; transform: scale(0.85); }
    .instructions-box { height: auto; max-height: 95vh; overflow-y: auto; padding: 20px; }
    .jessica-preview img { height: 180px; } 
    .instr-icons img { width: 100px; }
    .key { font-size: 2.5rem; padding: 15px 30px; }
}
@media (max-width: 900px) {
    .instr-columns { flex-direction: column; align-items: center; gap: 40px; }
    .instr-icons, .jessica-preview, .keys-container { margin-top: 30px; padding-bottom: 0; }
    .instr-col { width: 80%; padding: 0; border-right: none !important; border-bottom: 2px solid rgba(255, 215, 0, 0.3); padding-bottom: 30px; }
    .instr-col:last-child { border-bottom: none; }
    .hero-image { display: none; }
}
@media (max-width: 600px) {
    .content-wrapper { align-items: center; flex-direction: column-reverse; }
    .hero-image { height: 45vh; margin-right: 0; transform: translateY(0); margin-bottom: -20px; }
    .menu-content { margin-bottom: 0; transform: scale(0.8); }
    .menu-title-img { width: 100%; }
}